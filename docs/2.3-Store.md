# Store
In the previous sections, we defined the actions that represent the facts about â€œwhat happenedâ€ and the reducers that update the state according to those actions.

å‰é¢ï¼Œæˆ‘ä»¬å®šä¹‰äº†è¡¨è¾¾â€œä»€ä¹ˆå‘ç”Ÿäº†â€è¿™äº›äº‹å®çš„actionsï¼Œä»¥åŠæ ¹æ®actionæ›´æ–°stateçš„reducerã€‚

The ***Store*** is the object that brings them together. The store has the following responsibilities:

***Store*** å¯ä»¥ä¸ºactionå’Œreducerç‰µçº¿ã€‚å®ƒçš„ä½œç”¨æ˜¯ï¼š

* Holds application state;
* Allows access to state via getState();
* Allows state to be updated via dispatch(action);
* Registers listeners via subscribe(listener);
* Handles unregistering of listeners via the function returned by subscribe(listener).

* å­˜å‚¨åº”ç”¨çš„stateï¼›
* æä¾›è·å–stateçš„æ¥å£æ–¹æ³•getState()ï¼›
* å…è®¸é€šè¿‡è°ƒç”¨dispatch(action)æ–¹æ³•æ›´æ–°stateï¼›
* é€šè¿‡subscribe(listener)æ–¹æ³•æ³¨å†Œç›‘å¬å™¨ï¼›
* é€šè¿‡subscribe(listener)è¿”å›çš„æ–¹æ³•æ³¨é”€ç›‘å¬å™¨ï¼›

Itâ€™s important to note that youâ€™ll only have a single store in a Redux application. When you want to split your data handling logic, youâ€™ll use reducer composition instead of many stores.

é‡è¦çš„äº‹æƒ…è¯´ä¸‰éï¼š
ä¸€ä¸ªReduxåº”ç”¨åªèƒ½æœ‰ä¸€ä¸ªstoreã€‚
ä¸€ä¸ªReduxåº”ç”¨åªèƒ½æœ‰ä¸€ä¸ªstoreã€‚
ä¸€ä¸ªReduxåº”ç”¨åªèƒ½æœ‰ä¸€ä¸ªstoreã€‚  
è¦æŠŠå¤„ç†æ•°æ®çš„é€»è¾‘åˆ†æ¨¡å—çš„è¯ï¼Œç”¨reducer compositionè€Œä¸æ˜¯ç”¨å¤šä¸ªstoresã€‚

Itâ€™s easy to create a store if you have a reducer. In the previous section, we used combineReducers() to combine several reducers into one. We will now import it, and pass it to createStore().

æœ‰äº†reducerä¹‹åï¼Œåˆ›å»ºstoreä¸è¦å¤ªç®€å•ã€‚

```JavaScript
import { createStore } from 'redux'
import todoApp from './reducers'
let store = createStore(todoApp)
```

You may optionally specify the initial state as the second argument to createStore(). This is useful for hydrating the state of the client to match the state of a Redux application running on the server.

ä½ å¯ä»¥ä¸ºcreateStore()æä¾›ä¸€ä¸ªåˆå§‹åŒ–çš„stateã€‚è¿™ç‰¹ä¹ˆä»€ä¹ˆé¬¼ã€‚

```JavaScript
let store = createStore(todoApp, window.STATE_FROM_SERVER)
```

## Dispatching Actions

Now that we have created a store, letâ€™s verify our program works! Even without any UI, we can already test the update logic.

åˆ›å»ºå¥½äº†storeï¼Œæˆ‘ä»¬å¯ä»¥éªŒè¯ä»£ç èƒ½ä¸èƒ½è¡Œäº†ã€‚å³ä¾¿æ²¡æœ‰ç•Œé¢ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥æµ‹è¯•äº†ã€‚

```JavaScript
import { addTodo, completeTodo, setVisibilityFilter, VisibilityFilters } from './actions'

// Log the initial state
console.log(store.getState())

// Every time the state changes, log it
// Note that subscribe() returns a function for unregistering the listener
let unsubscribe = store.subscribe(() =>
  console.log(store.getState())
)

// Dispatch some actions
store.dispatch(addTodo('Learn about actions'))
store.dispatch(addTodo('Learn about reducers'))
store.dispatch(addTodo('Learn about store'))
store.dispatch(completeTodo(0))
store.dispatch(completeTodo(1))
store.dispatch(setVisibilityFilter(VisibilityFilters.SHOW_COMPLETED))

// Stop listening to state updates
unsubscribe()
```

You can see how this causes the state held by the store to change:

ä½ çœ‹ï¼Œstoreé‡Œçš„stateæ˜¯è¿™æ ·å˜åŒ–çš„ï¼šï¼ˆå›¾æˆ‘æ²¡ä¸‹ğŸ˜‚ï¼‰

We specified the behavior of our app before we even started writing the UI. We wonâ€™t do this in this tutorial, but at this point you can write tests for your reducers and action creators. You wonâ€™t need to mock anything because they are just functions. Call them, and make assertions on what they return.

æˆ‘ä»¬åœ¨å†™UIå‰å°±å®Œæˆäº†appåŠŸèƒ½çš„å®šä¹‰ã€‚è™½ç„¶ç°åœ¨è¿™ä¸ªå…¥é—¨æ•™ç¨‹äº†ä¸å†™äº†ï¼Œä¸è¿‡å…¶å®å¯ä»¥ç€æ‰‹å†™reducerså’Œaction creatorsçš„æµ‹è¯•äº†ã€‚ä½ ä¹Ÿä¸éœ€è¦mockä»€ä¹ˆï¼Œæ¯•ç«Ÿä»–ä»¬éƒ½è¿˜åªæ˜¯å­©å­å•Šã€‚ã€‚ã€‚é”™äº†ï¼Œæ¯•ç«Ÿå®ƒä»¬éƒ½åªæ˜¯functionå¥½å˜›ï¼Œè°ƒç”¨å°±å¯ä»¥äº†ã€‚

## Source Code

index.js

```JavaScript
import { createStore } from 'redux'
import todoApp from './reducers'

let store = createStore(todoApp)
```

## Next Steps

Before creating a UI for our todo app, we will take a detour to see how the data flows in a Redux application.

åˆ›å»ºUIä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå†æºœä¸€åœˆï¼Œç ”ç©¶ä¸€ä¸‹Reduxåº”ç”¨ä¸­æ•°æ®çš„æµå‘ã€‚
